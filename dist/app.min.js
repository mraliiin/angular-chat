!function(){"use strict";function e(e,t,n,s,o){o.errorOnUnhandledRejections(!1),n.html5Mode({enabled:!0,requireBase:!1}),s.otherwise("/"),t.state("login",{url:"/",templateUrl:"login.html",controller:"LoginController as vm"}).state("chat",{url:"/",template:'<div class="chat-container"><simple-chat></simple-chat></div>'})}function t(e,t){}angular.module("app",["ui.router"]).config(e).run(t),e.$inject=["$httpProvider","$stateProvider","$locationProvider","$urlRouterProvider","$qProvider"],t.$inject=["$rootScope","$state"]}(),function(){"use strict";function e(e,t,n,s){function o(){t(function(){e.$msgContainer.scrollTop(e.$msgContainer[0].scrollHeight)},200,!1)}var r=this;r.user=n.get_current_user(),r.botName="Jiji the robot",r.robotDelay=2e3,r.writingMessage="",r.demoMessages=["Sample message 1","Sample message 2","Sample message 3","Sample message 4","Sample message 5","Sample message 6","Sample message 7","Sample message 8","Sample message 9"],r.messages=[{username:r.botName,content:"Hi!",date:new Date}],r.addMessage=function(){r.writingMessage&&""!==r.writingMessage&&r.user&&r.messages.push({username:r.user.username,content:r.writingMessage,date:new Date}),r.writingMessage="",o(),t(function(){r.messages.push({username:r.botName,content:r.getRandomMessageContent(),date:new Date})},r.robotDelay)},r.playAudio=function(){new Audio("assets/sounds/ding.mp3").play()},r.getRandomMessageContent=function(){var e=Math.floor(Math.random()*r.demoMessages.length);return r.demoMessages[e]},r.logout=function(){n.set_current_user(null),s.go("login")},e.$watch("visible",function(){o(),t(function(){e.$chatInput.focus()},250)}),e.$watch("vm.messages.length",function(e,t){e!=t&&(o(),r.playAudio())})}function t(e,t){e.inputPlaceholderText||(e.inputPlaceholderText="Write your message here..."),e.submitButtonText&&""!==e.submitButtonText||(e.submitButtonText="Send"),e.$msgContainer=$(".msg-container-base"),e.$chatInput=$(t).find(".chat-input");var n=e.$msgContainer[0];e.$msgContainer.bind("scroll",_.throttle(function(){var t=n.scrollHeight;n.scrollTop<=10&&(e.historyLoading=!0,e.$apply(e.infiniteScroll),$timeout(function(){e.historyLoading=!1,t!==n.scrollHeight&&e.$msgContainer.scrollTop(360)},150))},300))}angular.module("app").directive("simpleChat",["$timeout",function(n){return e.$inject=["$scope","$timeout","LIBRARY","$state"],{restrict:"EA",templateUrl:"chatTemplate.html",replace:!0,scope:{submitFunction:"&",infiniteScroll:"&"},link:t,controller:e,bindToController:!0,controllerAs:"vm"}}])}(),function(){"use strict";function e(e,t){var n=null;return{set_current_user:function(t){n=t,e.sessionStorage.currentUser=t?JSON.stringify(n):null},get_current_user:function(){var t=e.sessionStorage.currentUser;return t?JSON.parse(t):null}}}angular.module("app").service("LIBRARY",e),e.$inject=["$window","$interval"]}(),function(){"use strict";function e(e,t){var n=this;n.user=e.get_current_user()||{},n.login=function(){e.set_current_user(n.user),t.go("chat")}}angular.module("app").controller("LoginController",e),e.$inject=["LIBRARY","$state"]}();